harnessApiVersion: '1.0'
type: CANARY
envName: Staging
failureStrategies:
- executionScope: WORKFLOW
  failureTypes:
  - APPLICATION_ERROR
  repairActionCode: ROLLBACK_WORKFLOW
  retryCount: 0
notificationRules:
- conditions:
  - FAILED
  executionScope: WORKFLOW
  notificationGroupAsExpression: false
  notificationGroups:
  - Account Administrator
preDeploymentSteps:
- type: HTTP
  name: Health Check
  properties:
    method: GET
    socketTimeoutMillis: 0
    header: 'content-type: application/json'
    assertion: ${httpResponseCode}==${ResponseCode}
    executeWithPreviousSteps: false
    url: ${Url}
  templateUri: HEROFi/HTTP Verifications/Health Check:latest
  templateVariables:
  - name: Url
  - name: ResponseCode
    value: '200'
templatized: false
